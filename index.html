<!DOCTYPE html>
<html>
  <head>
    <meta name="google-site-verification" content="X-u20lpRd-JX9M8Rgrue5OMTpnnRfO1DacwnNrLmqWU" />
    <title>My GitHub Pages Site</title>
  </head>
  <body>
    <h1 id="osm-parser-graph-builder">OSM Parser - Graph builder</h1>
    <p><img src="screenshot.png" style="display: block; margin: 0 auto" /></p>
    <h2 id="overview">Overview</h2>
    <p>OSM Parser is a Java application that aims to allow the user to parse data from OpenStreetMap (<a href="">https://www.openstreetmap.org/</a>), in particular the roads and cities and turn them into a graph, perform opertions on it such as computing shortest paths, and export it as a CSV file, PNG or EPS image. The GUI uses the JavaFX library and <em>osmosis</em> to filter data from large .pbf files, (You can find them <a href="https://download.geofabrik.de/">here</a>). Osmosis is a command line tool that let you keep nodes or ways with specific tags, reject other with other tags, choose elements according to desired specifications, fetch elements from a database,..</p>
    <p>The documentation and source code for osmosis can be found here :</p>
    <ul>
    <li>github <a href="https://github.com/openstreetmap/osmosis">source code</a>.</li>
    <li>wiki <a href="https://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage_0.48">detailed specifications</a>.</li>
    </ul>
    <h2 id="status">Status</h2>
    <p>Work still in progress. Please report all bugs.</p>
    <h2 id="installation">Installation</h2>
    <pre><code class="lang-bash">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/sjaubain/OSM-Parser.git
    </code></pre>
    <h3 id="requirements">Requirements</h3>
    <ul>
    <li>Java set up on your machine</li>
    <li>Osmosis installed (follow instruction on official site)
    For Linux, enter following command :</li>
    </ul>
    <pre><code class="lang-bash">sudo apt <span class="hljs-keyword">install</span> osmosis
    </code></pre>
    <p>Since JavaFX components don&#39;t come with Java development kit after version 8, it is strongly recommended to use version 8. If you are using a later version, you can temporarily downgrade it to 1.8. Otherwise, you will have to install JavaFX separately and set up your environment correctly.</p>
    <ul>
    <li><strong>Windows and Mac</strong></li>
    </ul>
    <p>As mentioned above, you can install the JDK 8 if you don&#39;t still have it. You may have to set the environment variable. Please refer for example to <a href="https://www.java.com/en/download/help/windows_manual_download.html">this site</a> for more details. Once installed, type <code>java -version</code> to check that everything is correct. You should be able to launch the application by simply click on the .jar file or with the command line :</p>
    <pre><code class="lang-bash"><span class="hljs-selector-tag">java</span> <span class="hljs-selector-tag">-jar</span> <span class="hljs-selector-tag">osmparser-1</span><span class="hljs-selector-class">.0-SNAPSHOT-launcher</span><span class="hljs-selector-class">.jar</span>
    </code></pre>
    <ul>
    <li><strong>Ubuntu</strong></li>
    </ul>
    <p>With the linux based OSs, it is a little more tricky to set up javaFX, but there is a script called <em>linux_setup.sh</em> that install automatically all required tools. Just type</p>
    <pre><code class="lang-bash"><span class="hljs-symbol">sudo</span> <span class="hljs-keyword">bash </span>linux_setup.sh
    </code></pre>
    <p>To run the application, type</p>
    <pre><code class="lang-bash"><span class="hljs-symbol">sudo</span> <span class="hljs-keyword">bash </span>linux_launcher
    </code></pre>
    <p>If you get errors, try to check if you have a valid JDK installed on your machine with <code>java -version</code>. If two or more JDKs are installed you can choose which one you want to use with</p>
    <pre><code class="lang-bash">sudo <span class="hljs-keyword">update</span>-alternatives <span class="hljs-comment">--config java</span>
    </code></pre>
    <p>and same for javac, the java compiler. Try to rerun the script and this should be ok.</p>
    <h2 id="usage">Usage</h2>
    <p>Once Osmosis is installed, you can download a country as .pbf file on geofabrik download server and put it in the /input folder. On the right pane, you can choose which type of road you want to filter (note that the ..._link categories should be taken with the corresponding type of road for a correct usage). If you want a complete networks, choose all options. (<strong>Warning : if your request involves too many nodes, i.e. too large map with too much roads, you will get a java heap out of space memory exception and the program will crash</strong>). You can also pick the bounds you want with left mouse button on the window you can open by clicking on the &quot;choose bounds&quot; button. Make sure that you pick the bounds on the region that corresponds to your .pbf file.
    Then click on <em>import</em> and wait for osmosis to do its job; (You will see two times <code>INFOS: Pipeline executing, waiting for completion.</code> and will have to wait two times until you see <code>INFOS: Total execution time: .... milliseconds.</code>). After you have loaded the graph, you can zoom and drag with right mouse button on the map. Click on &quot;show background&quot; if you want to have a more precise idea about where you are. To compute shortest paths, you just have to click twice on the map to choose source and destination nodes.</p>
    <h3 id="-export-files-"><strong>export files</strong></h3>
    <p>You can export the graph in CSV format with File -&gt; Export</p>
    <ul>
    <li>raw graph data</li>
    </ul>
    <p>All nodes composing ways and all edges will be exported, which can result in a large CSV file</p>
    <ul>
    <li>compressed graph</li>
    </ul>
    <p>Only cities nodes and edges between them (computed shortest paths) will be exported. Here is an output exmple :</p>
    <p><img src="screenshot2.png" style="display: block; margin: 0 auto" /></p>

  </body>
</html>
